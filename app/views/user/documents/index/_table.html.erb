<%
  # Display Actions only if required - 
  # No need to display when called from dashboard
  display_actions = true if display_actions.nil?
%>
<div id="TRANSLATIONS_TABLE" class="table-responsive">
  <table class="table table-hover table-custom spacing8" id="document_listing_table">
    <thead>
      <tr>
        <th style="width: 2%;">#</th>
        <th style="width: 25%;text-align: left;">Title</th>
        <th style="width: 15%;text-align: center;">Language</th>
        <th style="width: 10%;text-align: center;">Created At</th>
        <th style="width: 10%;text-align: center;">Status</th>
        <% if display_actions %>
          <th style="width: 10%;text-align: center;">Action</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @documents.each_with_index do |document, i| %>
      <% 
        if document.doc_type == "template_document"
          icon_path = "icons/template.svg"
          doc_url = user_template_document_path(document)
          doc_status_removed_url = update_status_user_template_document_path(document, status: 'removed') 
          doc_status_archive_url = update_status_user_template_document_path(document, status: 'archived')
        elsif document.doc_type == "table_document"
          icon_path = "icons/excel.svg"
          doc_url = user_table_document_path(document) 
          doc_status_removed_url = update_status_user_table_document_path(document, status: 'removed')
          doc_status_archive_url = update_status_user_table_document_path(document, status: 'archived')
        else
          doc_url = "#"
          doc_status_removed_url = "#"
          doc_status_archive_url = "#"
        end
      %>
      <tr id='TRANSLATIONS_ROW_<%= document.id %>'>
        <td>
          <span><%= serial_number(i) %></span>
        </td>
        <td>
          <div class="d-flex align-items-center">
            <%= image_tag icon_path, style: "width: 22px;height: 22px;margin-right:4px;" %>
            <!-- <span><i class="<%= document.display_icon %> mr-2"></i></span> -->
            <%= link_to document.title, doc_url, title: document.title %>
          </div>
        </td>
        <td class="its-tag" style="text-align: center;">
          <span><%= document.display_input_language %></span> 
          <span style="border: 0;font-size:16px;vertical-align: middle;text-align: center;"> > </span>
          <% document.display_output_languages.select{|x| !x.to_s.strip.blank?}.each do |lang| %>
            <span><%= lang %></span>
          <% end %>
        </td>

        <td style="text-align: center;"> <%= document.created_at.strftime("%d %b %Y - %I:%M %p") %> </td>
        
        <td style="text-align: center;">
          <span class="badge badge-info badge-<%= document.status_ui_class %>"><%=  document.status %></span>
        </td>
        
        <% if display_actions %>
        <td style="text-align: center;">
          <%= link_to doc_url, class: "btn btn-sm btn-default mr-4" do %>
            <i class="fa fa-edit"></i>
          <% end %>
          
          <%= link_to update_status_user_document_path(document, status: 'active', dt: params[:dt]), class: "btn btn-sm btn-default",  method: :put, remote: true do %>
            <i class="fa fa-check" style="color: #6c757d !important;" ></i>
          <% end if document.can_active? %>
          
          <%= link_to doc_status_removed_url, class: "btn btn-sm btn-default", method: :put, remote: true, data: {confirm: "Are you sure? Do you really want to remove this document?"} do %>
            <i class="fa fa-trash-o text-danger"></i>
          <% end if document.can_remove? %> 

          <%= link_to doc_status_archive_url, class: "btn btn-sm btn-default", method: :put, remote: true, data: {confirm: "Are you sure? Do you really want to archived this document?"} do %>
            <i class="fa fa-archive"></i>
          <% end if document.can_archive? %>
        </td>
        <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>