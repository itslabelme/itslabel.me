<%
  # Display Actions only if required - 
  # No need to display when called from dashboard
  display_actions = true if display_actions.nil?
%>


<div class="col-md-12">
                        <div class="card">
                            <div class="mail-inbox">

                                <div class="mobile-left">
                                    <a href="javascript:void(0);" class="btn btn-primary toggle-email-nav"><i class="fa fa-bars"></i></a>
                                </div>

                                <div class="body mail-left">
                                    <div class="mail-side">
                                        <ul id="tree2" class="tree">
                                            <li class="branch"><i class="fa fa-folder-o"></i><a href="#">Folder 01</a>                            
                                                <ul>
                                                    <li style="display: none;">Folder 01.01</li>
                                                    <li style="display: none;" class="branch"><i class="fa fa-folder-o"></i>Folder 01.02
                                                        <ul>
                                                            <li style="display: none;" class="branch"><i class="fa fa-folder-o"></i>Template 01
                                                                <ul>
                                                                    <li style="display: none;">Report1</li>
                                                                    <li style="display: none;">Report2</li>
                                                                    <li style="display: none;">Report3</li>
                                                                </ul>
                                                            </li>
                                                            <li style="display: none;">Template 02</li>
                                                        </ul>
                                                    </li>
                                                    <li style="display: none;">Folder 01.03</li>
                                                </ul>
                                            </li>
                                            <li class="branch"><i class="fa fa-folder-o"></i><a href="#">Folder 02</a>                            
                                                <ul>
                                                    <li style="display: none;">Folder 01.01</li>
                                                    <li style="display: none;" class="branch"><i class="fa fa-folder-o"></i>Folder 01.02
                                                        <ul>
                                                            <li style="display: none;" class="branch"><i class="fa fa-folder-o"></i>Template 01
                                                                <ul>
                                                                    <li style="display: none;">Report1</li>
                                                                    <li style="display: none;">Report2</li>
                                                                    <li style="display: none;">Report3</li>
                                                                </ul>
                                                            </li>
                                                            <li style="display: none;">Template 02</li>
                                                        </ul>
                                                    </li>
                                                    <li style="display: none;">Folder 01.03</li>
                                                </ul>
                                            </li>

                                            <li class="branch"><i class="fa fa-folder-o"></i><a href="#">Folder 03</a>                            
                                                <ul>
                                                    <li style="display: none;">Folder 01.01</li>
                                                    <li style="display: none;" class="branch"><i class="fa fa-folder-o"></i>Folder 01.02
                                                        <ul>
                                                            <li style="display: none;" class="branch"><i class="fa fa-folder-o"></i>Template 01
                                                                <ul>
                                                                    <li style="display: none;">Report1</li>
                                                                    <li style="display: none;">Report2</li>
                                                                    <li style="display: none;">Report3</li>
                                                                </ul>
                                                            </li>
                                                            <li style="display: none;">Template 02</li>
                                                        </ul>
                                                    </li>
                                                    <li style="display: none;">Folder 01.03</li>
                                                </ul>
                                            </li>

                                            <li class="branch"><i class="fa fa-folder-o"></i><a href="#">Folder 04</a>                            
                                                <ul>
                                                    <li style="display: none;">Folder 01.01</li>
                                                    <li style="display: none;" class="branch"><i class="fa fa-folder-o"></i>Folder 01.02
                                                        <ul>
                                                            <li style="display: none;" class="branch"><i class="fa fa-folder-o"></i>Template 01
                                                                <ul>
                                                                    <li style="display: none;">Report1</li>
                                                                    <li style="display: none;">Report2</li>
                                                                    <li style="display: none;">Report3</li>
                                                                </ul>
                                                            </li>
                                                            <li style="display: none;">Template 02</li>
                                                        </ul>
                                                    </li>
                                                    <li style="display: none;">Folder 01.03</li>
                                                </ul>
                                            </li>

                                            <li class="branch"><i class="fa fa-folder-o"></i><a href="#">Folder 05</a>                            
                                                <ul>
                                                    <li style="display: none;">Folder 01.01</li>
                                                    <li style="display: none;" class="branch"><i class="fa fa-folder-o"></i>Folder 01.02
                                                        <ul>
                                                            <li style="display: none;" class="branch"><i class="fa fa-folder-o"></i>Template 01
                                                                <ul>
                                                                    <li style="display: none;">Report1</li>
                                                                    <li style="display: none;">Report2</li>
                                                                    <li style="display: none;">Report3</li>
                                                                </ul>
                                                            </li>
                                                            <li style="display: none;">Template 02</li>
                                                        </ul>
                                                    </li>
                                                    <li style="display: none;">Folder 01.03</li>
                                                </ul>
                                            </li>


                                        </ul>
                                    </div>
                                </div>
                                <div class="body mail-right check-all-parent">

                                    
                                    <div class="mail-action clearfix m-l-15">
                                        <div class="pull-left">
                                            <div class="fancy-checkbox d-inline-block">
                                                <label>
                                                    <input class="check-all" type="checkbox" name="checkbox">
                                                    <span></span>
                                                </label>
                                            </div>
                                            <a href="javascript:void(0);" class="btn btn-light btn-sm" data-toggle="tooltip" data-placement="top" title="" data-original-title="Delete"><i class="icon-trash"></i></a>
                                            <a href="javascript:void(0);" class="btn btn-light btn-sm" data-toggle="tooltip" data-placement="top" title="" data-original-title="Archive"><i class="fa fa-archive"></i></a>
                                            <a href="javascript:void(0);" class="btn btn-light btn-sm" data-toggle="tooltip" data-placement="top" title="" data-original-title="Refresh"><i class="icon-refresh"></i></a> 
                                            <a href="javascript:void(0);" class="btn btn-light btn-sm" data-toggle="tooltip" data-placement="top" title="" data-original-title="Cut"><i class="fa fa-cut"></i> </a>   
                                            <a href="javascript:void(0);" class="btn btn-light btn-sm" data-toggle="tooltip" data-placement="top" title="" data-original-title="Copy"><i class="icon-docs"></i> </a>   
                                            <a href="javascript:void(0);" class="btn btn-light btn-sm" data-toggle="tooltip" data-placement="top" title="" data-original-title="Paste"><i class="fa fa-paste"></i></a>                                    
                                            
                                            
                                            <div class="btn-group">
                                                <span id="popoverWrapper" data-toggle="tooltip" data-placement="top" data-original-title="Move To" class="">
                                                    <button class="btn btn-light btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-share fa-fw"></i></button>
                                                
                                                    <div class="dropdown-menu" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 31px, 0px);">
                                                        <a class="dropdown-item" href="#">Folder 01</a>
                                                        <a class="dropdown-item" href="#">Folder 02</a>
                                                        <a class="dropdown-item" href="#">Folder 03</a>
                                                        <div role="separator" class="dropdown-divider"></div>
                                                        <a class="dropdown-item" href="#">Create New</a>
                                                        <a class="dropdown-item" href="#">Archive</a>
                                                        <a class="dropdown-item" href="#">Delete</a>
                                                      </div>                                              
                                                
                                                </span>
                                            </div>
                                        </div>
                                        <div class="pull-right ml-auto">
                                            <div class="pagination-email d-flex">
                                                <p>1-50/295</p>
                                                <div class="btn-group m-l-20">
                                                    <button type="button" class="btn btn-default btn-sm"><i class="fa fa-angle-left"></i></button>
                                                    <button type="button" class="btn btn-default btn-sm"><i class="fa fa-angle-right"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    
                                    <div class="table-responsive">
                                        <table class="table table-hover table-custom spacing8">
                                            <thead>
                                                <tr> 
                                                    <th></th>
                                                    <th>#</th>
                                                    <th>Name</th>
                                                    <th>Size</th>
                                                    <th>Created date</th>
                                                    <th>Last updated on</th>
                                                    <th>Folder</th>
                                                </tr>
                                            </thead>
                                            <tbody oncontextmenu="event.preventDefault();$('#context-menu').show();$('#context-menu').offset({'top':mouseY,'left':mouseX})">
                                               <% @documents.each_with_index do |document, i| %>
                                                  <% 
        if document.doc_type == "template_document"
          icon_path = "icons/template.svg"
          doc_url = user_template_document_path(document)
          doc_status_removed_url = update_status_user_template_document_path(document, status: 'removed') 
          doc_status_archive_url = update_status_user_template_document_path(document, status: 'archived')
          doc_type="Template Based"
        elsif document.doc_type == "table_document"
          icon_path = "icons/excel.svg"
          doc_url = user_table_document_path(document) 
          doc_status_removed_url = update_status_user_table_document_path(document, status: 'removed')
          doc_status_archive_url = update_status_user_table_document_path(document, status: 'archived')
          doc_type="Table Based"
        else
          doc_url = "#"
          doc_status_removed_url = "#"
          doc_status_archive_url = "#"
          doc_type=""
        end
      %>
                                                <tr>
                                                    <td class="w20">
                                                        <div class="md-left">
                                                            <label class="fancy-checkbox">
                                                                <input type="checkbox" name="checkbox" class="checkbox-tick">
                                                                <span></span>
                                                            </label>
                                                        </div>
                                                    </td>
                                                    <td class="w60"><%= serial_number(i) %></td>
                                                    <td>
                                                       <%= link_to document.title, doc_url, title: document.title %>
                                                        <p class="mb-0"><%=doc_type%></p>
                                                    </td>
                                                    <td>
                                                        <span>763.5mb</span>
                                                    </td>
                                                    <td><%= document.created_at.strftime("%d %b %Y - %I:%M %p") %></td>
                                                    <td><%= document.updated_at.strftime("%d %b %Y - %I:%M %p") %></td>
                                                    <td><strong>Folder 01</strong></td>
                                                </tr>
                                                <% end %>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>